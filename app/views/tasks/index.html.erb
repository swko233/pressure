<%= stylesheet_link_tag "task/index", :media => "all" %>
<%= javascript_include_tag "tasks_index.js" %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

<h1>Tasks#index</h1>
<h2>予定</h2>
<p><%= link_to 'About',tasks_path,class: 'testes'%></p>
<p>実質時間の表示</p>
<p>新規作成へのリンク</p>
<p></p>
<p></p>

<div class="container-fluid">
	<% @tasks.each do |task| %>
		<div class="row task-view">
			<div class="col-lg-12">
				<div>
					<%= task.schedule %>
				</div>
				<div>
					<%= task.deadline %>
				</div>
			</div>
			<div class="col-lg-5">
				<p>棒チャート</p>
				<div class="bar-chart">
					<div class="status-marker"></div>
					<div class="bar-first"></div>
					<div class="bar-second"></div>
					<div class="bar-third"></div>
				</div>
				<!-- <canvas id="myChart"></canvas> -->
			</div>
			<div class="col-lg-5">
				<p>残り時間</p>
      				<% rest_day = task.deadline - Date.today
      				rest = rest_day.to_i
     				hours = (rest * 24)
      				days = rest
      				real_hours = task.real_time/60 * days
      				count = [days,hours,real_hours] 
      				logger.debug(task.deadline)
      				logger.debug(Date.today)
      				logger.debug(rest)
      				logger.debug(hours)
      				logger.debug(days)%>
      			<p><%= count[0].to_s + '日' + count[1].to_s + '時間' %></p>
      			<p><%= '使える時間' + count[2].to_s + '時間'%></p>
			</div>
			<div class="col-lg-2">
				<%= link_to '削除', task_path(task.id),method: :delete %>
			</div>
		</div>
	<% end %>
</div>





